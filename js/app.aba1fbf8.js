(function(){var t={3005:function(t,e,n){"use strict";var i=n(6369),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wedding"},[n("Editor")],1)},a=[],r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"editor",staticClass:"wedding-editor"},[t._m(0),n("p",{staticClass:"code"},[t._v("Hi,好久不见")]),n("p",{staticClass:"code"},[t._v(" 现在是: "),n("span",[t._v(t._s(t.startDate))])]),n("pre",[t._v("    "),n("code",{domProps:{innerHTML:t._s(t.highlightedCode)}}),t._v("\n  ")]),!t.canStart&&!t.hasClosed||t.canOpen?t._e():n("div",{staticClass:"editor-open",on:{click:function(e){t.canOpen=!0}}},[n("svg",{staticClass:"css-i6dzq1",attrs:{viewBox:"0 0 24 24",width:"18",height:"18",stroke:"currentColor","stroke-width":"2",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"}},[n("rect",{attrs:{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}}),n("line",{attrs:{x1:"9",y1:"3",x2:"9",y2:"21"}})])]),n("Executions",{attrs:{canExecute:t.canExecute},on:{onUpdating:t.scrollToBottom,onFinish:function(e){t.canOpen=!0}}}),n("invitation",{attrs:{canOpen:t.canOpen},on:{onClose:function(e){t.canOpen=!1,t.hasClosed=!0},sendBarrage:t.onAfterSending}}),n("Barrage",{attrs:{wish:t.wish,canStart:t.canStart}})],1)},o=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("header",{staticClass:"editor-header"},[n("a",{attrs:{href:"javascript:;"}}),n("a",{staticClass:"minimum",attrs:{href:"javascript:;"}}),n("a",{staticClass:"maximum",attrs:{href:"javascript:;"}})])}],c=n(187),l=n.n(c),u=(n(2036),{code:"\n// 美好的事情\n// 愿与你分享\n// 我们要结婚啦\n😗新娘：CL;\n陕西咸阳人;\n😋新郎：LXY;\n陕西韩城人;\n// 我们将结为夫妻;\n// 在你的见证与祝福下\n// 以后的日子里\n// 我们将一起前行！",executions:[{name:"打包一切美好祝福",time:"",duration:0,visible:!1},{name:"-平安-",time:"",duration:0,visible:!1},{name:"-幸福-",time:"",duration:0,visible:!1},{name:"-快乐-",time:"",duration:0,visible:!1},{name:"-美满🙂-",time:"",duration:0,visible:!1},{name:"-多财😄-",time:"",duration:0,visible:!1},{name:"幸福开启中...",time:"",visible:!1}],barrages:["66666666","愿你美梦成真","你的邀请函真是美","人美心更美","早生贵子","哇哇哇","还差女朋友吗","白头偕老","祝幸福~","恭喜恭喜啊","你真棒","羡慕羡慕 ","牛批哇","恭喜你","希望幸福美满","恭喜恭喜","哇","哈哈哈恭喜你","恭喜恭喜","恭喜你恭喜你","哇成家啦","祝幸福","郎才女貌~"]}),d=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"executions"},[t._l(t.executions,(function(e,i){return n("p",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"execution.visible"}],key:i,staticClass:"code"},[n("span",{staticClass:"addon"},[t._v("~")]),t._v(" ["),n("span",{staticClass:"time"},[t._v(t._s(e.time))]),t._v("] "),n("span",{staticClass:"task"},[t._v(t._s(e.name))]),void 0!==e.duration?n("span",{staticClass:"duration"},[t._v(t._s(e.duration)+" ms")]):t._e()])})),n("p",{directives:[{name:"show",rawName:"v-show",value:t.isProcessed,expression:"isProcessed"}],staticClass:"code"},[n("span",{staticClass:"addon"},[t._v("~")]),t._v(" "+t._s(t.progressBarText)+" "),n("span",{staticClass:"percentage"},[t._v(t._s(t.percentage)+"%")])]),n("p",{directives:[{name:"show",rawName:"v-show",value:t.endExecution.visible,expression:"endExecution.visible"}],staticClass:"code"},[n("span",{staticClass:"addon"},[t._v("~")]),t._v(" ["),n("span",{staticClass:"time"},[t._v(t._s(t.endExecution.time))]),t._v("] "),n("span",{staticClass:"task"},[t._v(t._s(t.endExecution.name))])])],2)},p=[],h={name:"Executions",props:["canExecute"],data(){return{executions:u.executions,isProcessed:!1,isFinished:!1,progressBarText:"--------------------------",endExecution:{name:"打开中...",time:"",visible:!1}}},computed:{percentage(){const t=this.progressBarText.split("").filter((t=>"#"===t)).length,e=this.progressBarText.length;return Math.floor(100*t/e)}},watch:{canExecute:function(t){!0===t&&this.runExecutions()}},updated(){this.$emit("onUpdating")},methods:{runExecutions:async function(){for(const t of this.executions)await this.progressivelyRun(t);await this.successProcessing(1e3),await this.progressivelyRun(this.endExecution).then((()=>{setTimeout((()=>{this.isFinished=!0,this.$emit("onFinish")}),500)}))},progressivelyRun(t,e){return new Promise((n=>{let i=new Date,s=e||50*Math.random()+250,a=()=>{t.time=i.toLocaleTimeString(),t.duration=void 0!==t.duration?s.toFixed(2):void 0,t.visible=!0,n()};setTimeout(a,s)}))},successProcessing(t){return new Promise((e=>{let n,i=null,s=0;this.isProcessed=!0;let a=r=>{let o;null===i&&(i=r),o=r-i,s%3===0&&(this.progressBarText=this.progressBarText.replace("-","#")),s++,o<t?n=requestAnimationFrame(a):(e(),this.progressBarText=this.progressBarText.replace(/-/g,"#"),cancelAnimationFrame(n))};n=requestAnimationFrame(a)}))}}},m=h,f=n(3736),v=(0,f.Z)(m,d,p,!1,null,null,null),g=v.exports,w=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"wedding-invitation",class:{"invitation-bounce":t.canOpen}},[i("div",{staticClass:"invitation-container",class:{"invitation-down":t.isOpening}},[i("div",{staticClass:"invitation-cover"},[i("div",{staticClass:"cover-content",class:{"invitation-up":t.isOpening}},[i("div",{staticClass:"content-inside"},[i("img",{staticClass:"content-inside-photo",attrs:{src:n(2229)}}),i("p",[t._v("我们结婚啦！")]),t._m(0),i("p",[t._v("时间：2022年 5月 9日")]),t._m(1),i("div",{staticClass:"content-inside-bless"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.wish,expression:"wish"}],ref:"wishInput",attrs:{placeholder:"写下你的祝福"},domProps:{value:t.wish},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.sendBarrage.apply(null,arguments)},focus:function(e){t.isFocused=!0},blur:function(e){t.isFocused=!1,t.hasEntered=!1},input:function(e){e.target.composing||(t.wish=e.target.value)}}}),!t.wish&&t.isFocused&&t.hasEntered?i("p",[t._v("请输入祝福哦")]):t._e(),i("div",[i("button",{on:{click:t.sendBarrage}},[t._v("发送祝福弹幕")]),i("button",{on:{click:t.closeInvitation}},[t._v("关闭")])])])])]),i("div",{staticClass:"cover-inside-left",class:{opening:t.isOpening}}),i("div",{staticClass:"cover-inside-right",class:{opening:t.isOpening}}),i("img",{staticClass:"cover-inside-seal",class:{"invitation-flight":t.isOpening},attrs:{src:n(4490)},on:{click:t.openInvitation}})])])])},_=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",[n("b",[t._v("LXY & CL")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",[t._v(" 地点： "),n("br"),n("b",[t._v("陕西省·韩城市·格兰云天酒店·三楼宴会厅")])])}],b={props:["canOpen"],data(){return{isOpening:!1,wish:"",isFocused:!1,hasEntered:!1}},methods:{openInvitation(){this.isOpening=!0},closeInvitation(){this.isOpening=!1,setTimeout((()=>{this.$emit("onClose")}),660)},sendBarrage(){this.$nextTick((()=>{this.hasEntered=!0,this.wish&&(this.isOpening=!1,this.$refs.wishInput.blur(),setTimeout((()=>{this.$emit("sendBarrage",this.wish)}),660))}))}}},x=b,C=(0,f.Z)(x,w,_,!1,null,null,null),y=C.exports,O=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"barrage",staticClass:"wedding-barrage",style:{opacity:t.canStart?1:0}},[n("div",{domProps:{innerHTML:t._s(t.codeInStyleTag)}}),n("p",{ref:"barrageFirst",staticClass:"code barrage-0",style:{transform:"translate("+t.initialOffset+"px)",top:"10px"}},[n("span",{staticClass:"mine"},[t._v(t._s(t.wish))]),t._l(t.filterBarrage(t.barrages,0),(function(e,i){return n("span",{key:i},[t._v(t._s(e))])}))],2),n("p",{ref:"barrageSecond",staticClass:"code barrage-1",style:{transform:"translate("+t.initialOffset+"px)",top:"40px"}},t._l(t.filterBarrage(t.barrages,1),(function(e,i){return n("span",{key:i},[t._v(t._s(e))])})),0),n("p",{ref:"barrageThird",staticClass:"code barrage-2",style:{transform:"translate("+t.initialOffset+"px)",top:"70px"}},t._l(t.filterBarrage(t.barrages,2),(function(e,i){return n("span",{key:i},[t._v(t._s(e))])})),0),n("p",{ref:"barrageFourth",staticClass:"code barrage-3",style:{transform:"translate("+t.initialOffset+"px)",top:"100px"}},t._l(t.filterBarrage(t.barrages,3),(function(e,i){return n("span",{key:i},[t._v(t._s(e))])})),0),n("div",{staticClass:"barrage-space"})])},E=[],$={props:["wish","canStart"],data(){return{barrages:u.barrages,animationStyle:"",initialOffset:0}},computed:{codeInStyleTag:function(){return`<style>${this.animationStyle}</style>`}},watch:{canStart:function(t){!0===t&&this.barrageAnimationStart()}},methods:{barrageAnimationStart(){let t=this.getWidth(this.$refs.barrage),e=[this.getWidth(this.$refs.barrageFirst),this.getWidth(this.$refs.barrageSecond),this.getWidth(this.$refs.barrageThird),this.getWidth(this.$refs.barrageFourth)];this.initialOffset=t+15,e.map(((e,n)=>{this.animationStyle+=`\n          .barrage-${n}{\n            animation: barrage-${n} ${e/40}s linear infinite;\n            -webkit-animation: barrage-${n} ${e/40}s linear infinite;\n          }\n          @keyframes barrage-${n} {\n            from {\n              transform:translate3d(${t+15}px,0,0);\n              -webkit-transform:translate3d(${t+15}px,0,0);\n            }\n            to {\n              transform:translate3d(-${e+15}px,0,0);\n              -webkit-transform:translate3d(-${e+15}px,0,0);\n            }\n          }`}))},getWidth(t){return window.getComputedStyle(t,null).width.replace("px","")-0},filterBarrage(t,e){if(t)return t.filter(((t,n)=>{if(n%4===e)return t}))}}},T=$,k=(0,f.Z)(T,O,E,!1,null,null,null),F=k.exports,B={name:"Editor",components:{Executions:g,Invitation:y,Barrage:F},data(){return{startDate:"",code:u.code,currentCode:"",isCursorVisible:1,canExecute:!1,canOpen:!1,wish:"",hasClosed:!1,canStart:!1}},created(){this.startDate=(new Date).toDateString(),this.progressivelyTyping()},updated(){this.scrollToBottom()},computed:{highlightedCode(){const t=l().highlight(this.currentCode,l().languages.javascript),e=`${t}<span style="opacity:${this.isCursorVisible}"> ▍</span>`;return e}},methods:{scrollToBottom(){this.$refs.editor.scrollTop=1e5},progressivelyTyping(){return new Promise((t=>{let e,n=0,i=0,s=()=>{let a=Math.round(6*Math.random());n%2===0&&a%4===0&&(this.currentCode=this.code.substring(0,i),i++),n%24===0&&(this.isCursorVisible=0===this.isCursorVisible?1:0),n++,i<=this.code.length?e=requestAnimationFrame(s):(t(),this.canExecute=!0,cancelAnimationFrame(e))};e=requestAnimationFrame(s)}))},onAfterSending(t){this.wish=t,this.canOpen=!1,setTimeout((()=>{this.canStart=!0}),800)}}},S=B,A=(0,f.Z)(S,r,o,!1,null,null,null),P=A.exports,j={props:[],components:{Editor:P},name:"Wedding"},q=j,I=(0,f.Z)(q,s,a,!1,null,null,null),M=I.exports;new i.Z({el:"#app",render:t=>t(M)})},2036:function(){(function(){for(var t=0,e=["ms","moz","webkit","o"],n=0;n<e.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[e[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[n]+"CancelAnimationFrame"]||window[e[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e){var n=(new Date).getTime(),i=Math.max(0,16-(n-t)),s=window.setTimeout((function(){e(n+i)}),i);return t=n+i,s}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)})})()},2229:function(t,e,n){"use strict";t.exports=n.p+"img/photo.1aeb71a3.png"},4490:function(t,e,n){"use strict";t.exports=n.p+"img/seal.60b2f1af.png"}},e={};function n(i){var s=e[i];if(void 0!==s)return s.exports;var a=e[i]={exports:{}};return t[i].call(a.exports,a,a.exports,n),a.exports}n.m=t,function(){var t=[];n.O=function(e,i,s,a){if(!i){var r=1/0;for(u=0;u<t.length;u++){i=t[u][0],s=t[u][1],a=t[u][2];for(var o=!0,c=0;c<i.length;c++)(!1&a||r>=a)&&Object.keys(n.O).every((function(t){return n.O[t](i[c])}))?i.splice(c--,1):(o=!1,a<r&&(r=a));if(o){t.splice(u--,1);var l=s();void 0!==l&&(e=l)}}return e}a=a||0;for(var u=t.length;u>0&&t[u-1][2]>a;u--)t[u]=t[u-1];t[u]=[i,s,a]}}(),function(){n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,{a:e}),e}}(),function(){n.d=function(t,e){for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){n.p=""}(),function(){var t={143:0};n.O.j=function(e){return 0===t[e]};var e=function(e,i){var s,a,r=i[0],o=i[1],c=i[2],l=0;if(r.some((function(e){return 0!==t[e]}))){for(s in o)n.o(o,s)&&(n.m[s]=o[s]);if(c)var u=c(n)}for(e&&e(i);l<r.length;l++)a=r[l],n.o(t,a)&&t[a]&&t[a][0](),t[a]=0;return n.O(u)},i=self["webpackChunkwedding_invitation_for_programmers"]=self["webpackChunkwedding_invitation_for_programmers"]||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))}();var i=n.O(void 0,[998],(function(){return n(3005)}));i=n.O(i)})();
//# sourceMappingURL=app.aba1fbf8.js.map